{% extends "base.html" %}

{% block title %}
    Dispensaries
{% endblock %}

{% block content %}
	<!-- Create Dispensary Modal -->
	<div class="modal fade" id="createDispensaryModal" tabindex="-1" aria-labelledby="createDispensaryModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
				<h5 class="modal-title" id="createDispensaryModalLabel">Create Dispensary</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<form id="createDispensaryForm">
						<div class="mb-3">
							<label for="name">Name</label>
							<input type="text" class="form-control" id="name" required>
						</div>
						<div class="mb-3">
							<label for="location">Location</label>
							<input type="text" class="form-control" id="location" required>
						</div>
						<div class="mb-3">
							<label for="description">Description</label>
							<textarea class="form-control" id="description" rows="3" required></textarea>
						</div>
						<div class="mb-3">
							<label for="image">Image</label>
							<input type="file" class="form-control" id="image" accept="image/*" required>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
							<button type="submit" class="btn btn-primary" id="submitCreateDispensary">Create</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	<!-- Update Dispensary Modal -->
	<div class="modal fade" id="updateDispensaryModal" tabindex="-1" aria-labelledby="updateDispensaryModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="updateDispensaryModalLabel">Update Dispensary</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<form id="updateDispensaryForm">
						<input type="hidden" id="modal_dispensary_id">
						<div class="mb-3">
							<label for="update_name">Name</label>
							<input type="text" class="form-control" id="update_name" required>
						</div>
						<div class="mb-3">
							<label for="update_location">Location</label>
							<input type="text" class="form-control" id="update_location" required>
						</div>
						<div class="mb-3">
							<label for="update_description">Description</label>
							<textarea class="form-control" id="update_description" rows="3" required></textarea>
						</div>
						<div class="mb-3">
							<label for="update_image">Image</label>
							<input type="file" class="form-control" id="update_image" accept="image/*">
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
							<button type="submit" class="btn btn-primary" id="submitUpdateDispensary">Save Changes</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	<!-- Delete Dispensary Modal -->
	<div class="modal fade" id="deleteDispensaryModal" tabindex="-1" aria-labelledby="deleteDispensaryModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="deleteDispensaryModalLabel">Delete Dispensary</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<p>Are you sure you want to delete this Dispensary?</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
					<button type="button" class="btn btn-danger" id="confirmDeleteDispensary">Delete</button>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
{% block display %}
  <div class="container">
    <h1 class="text-center mt-5 mb-5">Dispensaries</h1>
    <div class="row mb-3">
      {% if user_role == 'CLOUD_PRODUCER' %}
        <div class="col-md-12 text-center">
          <button class="btn btn-primary" id="openCreateDispensaryModal">Create Dispensary</button>
        </div>
      {% endif %}
    </div>

    <!-- Filters -->
    <div class="row mb-3">
      <div class="col">
        <label for="filter_location">Location</label>
        <input type="text" class="form-control" id="filter_location" placeholder="Search by location">
      </div>
    </div>
    <div id="dispensariesContainer">
    </div>
  </div>
{% endblock %}
