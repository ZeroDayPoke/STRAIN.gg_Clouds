{% extends "base.html" %}

{% block title %}
    Dispensaries
{% endblock %}

{% block script %}
  <script src="{{ url_for('static', filename='scripts/stores.js') }}">
  </script>
{% endblock %}

{% block content %}
	<!-- Create Store Modal -->
	<div class="modal fade" id="createStoreModal" tabindex="-1" aria-labelledby="createStoreModalLabel" aria-hidden="true">
		<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
			<h5 class="modal-title" id="createStoreModalLabel">Create Store</h5>
			<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
			<form id="createStoreForm">
				<div class="mb-3">
				<label for="name">Name</label>
				<input type="text" class="form-control" id="name" required>
				</div>
				<div class="mb-3">
				<label for="location">Location</label>
				<input type="text" class="form-control" id="location" required>
				</div>
				<div class="mb-3">
				<label for="operating_hours">Operating Hours</label>
				<input type="text" class="form-control" id="operating_hours" required>
				</div>
				<div class="mb-3">
				<label for="image">Image</label>
				<input type="file" class="form-control" id="image" accept="image/*" required>
				</div>
				<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
				<button type="submit" class="btn btn-primary" id="submitCreateStore">Create</button>
				</div>
			</form>
			</div>
		</div>
		</div>
	</div>
	<!-- Update Store Modal -->
	<div class="modal fade" id="updateStoreModal" tabindex="-1" aria-labelledby="updateStoreModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="updateStoreModalLabel">Update Store</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<form id="updateStoreForm">
						<input type="hidden" id="modal_store_id">
						<div class="mb-3">
							<label for="update_name">Name</label>
							<input type="text" class="form-control" id="update_name" required>
						</div>
						<div class="mb-3">
							<label for="update_location">Location</label>
							<input type="text" class="form-control" id="update_location" required>
						</div>
						<div class="mb-3">
							<label for="update_operating_hours">Operating Hours</label>
							<textarea class="form-control" id="update_operating_hours" rows="3" required></textarea>
						</div>
						<div class="mb-3">
							<label for="update_image">Image</label>
							<input type="file" class="form-control" id="update_image" accept="image/*">
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
							<button type="submit" class="btn btn-primary" id="submitUpdateStore">Save Changes</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
	<!-- Delete Store Modal -->
	<div class="modal fade" id="deleteStoreModal" tabindex="-1" aria-labelledby="deleteStoreModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="deleteStoreModalLabel">Delete Store</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<p>Are you sure you want to delete this Store?</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
					<button type="button" class="btn btn-danger" id="confirmDeleteStore">Delete</button>
				</div>
			</div>
		</div>
	</div>
	<!-- Add Strain Modal -->
	<div class="modal fade" id="addStrainModal" tabindex="-1" aria-labelledby="addStrainModalLabel" aria-hidden="true">
		<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
			<h5 class="modal-title" id="addStrainModalLabel">Add Strain to Store</h5>
			<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
			<form id="addStrainForm">
				<input type="hidden" id="store-id-input">
				<div class="mb-3">
				<label for="strain-id-input">Strain ID:</label>
				<input type="text" class="form-control" id="strain-id-input">
				</div>
				<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
				<button type="submit" class="btn btn-primary">Add Strain</button>
				</div>
			</form>
			</div>
		</div>
		</div>
	</div>
{% endblock %}
{% block display %}
  <div class="container">
    <h1 class="text-center mt-5 mb-5">Dispensaries</h1>
    <div class="row mb-3">
      {% if user_role == "CLOUD_VENDOR" %}
        <div class="col-md-12 text-center">
          <button class="btn btn-primary" id="openCreateStoreModal">Create Store</button>
        </div>
      {% endif %}
    </div>

    <!-- Filters -->
    <div class="row mb-3">
      <div class="col">
        <label for="filter_location">Location</label>
        <input type="text" class="form-control" id="filter_location" placeholder="Search by location">
      </div>
    </div>
    <div id="storesContainer">
    </div>
  </div>
{% endblock %}
